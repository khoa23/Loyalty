2026-01-03 13:36:35.039 +07:00 [INF] Starting LoyaltyAPI application
2026-01-03 13:36:37.018 +07:00 [INF] LoyaltyAPI is starting up
2026-01-03 13:36:37.209 +07:00 [WRN] The WebRootPath was not found: D:\Code\Loyalty\LoyaltyAPI\wwwroot. Static files may be unavailable.
2026-01-03 13:36:37.407 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44343/ - null null
2026-01-03 13:36:37.493 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-03 13:36:37.494 +07:00 [INF] Hosting environment: Development
2026-01-03 13:36:37.495 +07:00 [INF] Content root path: D:\Code\Loyalty\LoyaltyAPI
2026-01-03 13:36:38.298 +07:00 [INF] Executing endpoint 'HTTP: GET /'
2026-01-03 13:36:38.344 +07:00 [INF] Executed endpoint 'HTTP: GET /'
2026-01-03 13:36:38.350 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44343/ - 200 null text/plain; charset=utf-8 946.1186ms
2026-01-03 13:36:38.465 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44343/favicon.ico - null null
2026-01-03 13:36:38.470 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44343/favicon.ico - 401 null null 5.5871ms
2026-01-03 13:41:57.364 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44343/api/User/login - application/json; charset=utf-8 null
2026-01-03 13:41:57.372 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI)'
2026-01-03 13:41:57.396 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoyaltyAPI.Model.LoginRequest) on controller LoyaltyAPI.Controllers.UserController (LoyaltyAPI).
2026-01-03 13:41:58.985 +07:00 [INF] Executed action LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI) in 1585.3533ms
2026-01-03 13:41:58.986 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI)'
2026-01-03 13:41:58.990 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Npgsql.PostgresException (0x80004005): 42501: user dev_user does not have USAGE privilege on schema loyalty_admin
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Dapper.SqlMapper.QueryRowAsync[T](IDbConnection cnn, Row row, Type effectiveType, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 489
   at LoyaltyAPI.Controllers.UserController.Login(LoginRequest request) in D:\Code\Loyalty\LoyaltyAPI\Controllers\UserController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at LoyaltyAPI.Security.ApiKeyMiddleware.InvokeAsync(HttpContext context) in D:\Code\Loyalty\LoyaltyAPI\Security\ApiKeyMiddleware.cs:line 42
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
  Exception data:
    Severity: ERROR
    SqlState: 42501
    MessageText: user dev_user does not have USAGE privilege on schema loyalty_admin
    File: errors.go
    Line: 527
    Routine: NewInsufficientPrivilegeOnDescriptorError
2026-01-03 13:41:59.079 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44343/api/User/login - 500 null text/plain; charset=utf-8 1715.1764ms
2026-01-03 13:44:00.748 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44343/api/User/login - application/json; charset=utf-8 null
2026-01-03 13:44:00.753 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI)'
2026-01-03 13:44:00.753 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoyaltyAPI.Model.LoginRequest) on controller LoyaltyAPI.Controllers.UserController (LoyaltyAPI).
2026-01-03 13:44:01.874 +07:00 [INF] User khachhang_a logged in successfully.
2026-01-03 13:44:01.881 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType18`4[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int64, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-03 13:44:01.906 +07:00 [INF] Executed action LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI) in 1152.3632ms
2026-01-03 13:44:01.906 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI)'
2026-01-03 13:44:01.906 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44343/api/User/login - 200 null application/json; charset=utf-8 1158.1328ms
2026-01-03 13:44:01.966 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44343/api/User/customer/1138198698525917185 - null null
2026-01-03 13:44:01.968 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44343/api/User/customer/1138198698525917185 - 404 null null 1.982ms
2026-01-03 13:44:01.969 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:44343/api/User/customer/1138198698525917185, Response status code: 404
2026-01-03 13:44:01.972 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44343/api/User/customer/rewards?page=1&pageSize=1 - null null
2026-01-03 13:44:01.973 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.UserController.GetCustomer (LoyaltyAPI)'
2026-01-03 13:44:01.979 +07:00 [INF] Route matched with {action = "GetCustomer", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomer(Int32, Int32) on controller LoyaltyAPI.Controllers.UserController (LoyaltyAPI).
2026-01-03 13:44:01.987 +07:00 [INF] GetCustomer called with page 1, pageSize 1
2026-01-03 13:44:02.057 +07:00 [INF] GetCustomer returned 1 rewards for page 1, totalCount 3
2026-01-03 13:44:02.058 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[LoyaltyAPI.Model.RewardResponse, LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-03 13:44:02.081 +07:00 [INF] Executed action LoyaltyAPI.Controllers.UserController.GetCustomer (LoyaltyAPI) in 101.5559ms
2026-01-03 13:44:02.081 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.UserController.GetCustomer (LoyaltyAPI)'
2026-01-03 13:44:02.081 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44343/api/User/customer/rewards?page=1&pageSize=1 - 200 null application/json; charset=utf-8 108.7463ms
2026-01-03 13:44:02.289 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44343/api/User/customer/rewards?page=1&pageSize=6 - null null
2026-01-03 13:44:02.289 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.UserController.GetCustomer (LoyaltyAPI)'
2026-01-03 13:44:02.290 +07:00 [INF] Route matched with {action = "GetCustomer", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomer(Int32, Int32) on controller LoyaltyAPI.Controllers.UserController (LoyaltyAPI).
2026-01-03 13:44:02.290 +07:00 [INF] GetCustomer called with page 1, pageSize 6
2026-01-03 13:44:02.318 +07:00 [INF] GetCustomer returned 3 rewards for page 1, totalCount 3
2026-01-03 13:44:02.318 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[LoyaltyAPI.Model.RewardResponse, LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-03 13:44:02.319 +07:00 [INF] Executed action LoyaltyAPI.Controllers.UserController.GetCustomer (LoyaltyAPI) in 29.1657ms
2026-01-03 13:44:02.319 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.UserController.GetCustomer (LoyaltyAPI)'
2026-01-03 13:44:02.320 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44343/api/User/customer/rewards?page=1&pageSize=6 - 200 null application/json; charset=utf-8 30.6744ms
2026-01-03 13:44:05.037 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44343/api/Reward/history/1138198698634805249?page=1&pageSize=100 - null null
2026-01-03 13:44:05.038 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.RewardController.GetRedemptionHistory (LoyaltyAPI)'
2026-01-03 13:44:05.043 +07:00 [INF] Route matched with {action = "GetRedemptionHistory", controller = "Reward"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRedemptionHistory(Int64, Int32, Int32) on controller LoyaltyAPI.Controllers.RewardController (LoyaltyAPI).
2026-01-03 13:44:05.068 +07:00 [INF] Redemption history retrieved successfully for customer 1138198698634805249, page 1, pageSize 100, count 1
2026-01-03 13:44:05.069 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType16`6[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[LoyaltyAPI.Model.RedemptionHistoryResponse, LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-03 13:44:05.073 +07:00 [INF] Executed action LoyaltyAPI.Controllers.RewardController.GetRedemptionHistory (LoyaltyAPI) in 30.2912ms
2026-01-03 13:44:05.073 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.RewardController.GetRedemptionHistory (LoyaltyAPI)'
2026-01-03 13:44:05.073 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44343/api/Reward/history/1138198698634805249?page=1&pageSize=100 - 200 null application/json; charset=utf-8 36.4476ms
2026-01-03 13:44:22.937 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44343/api/User/login - application/json; charset=utf-8 null
2026-01-03 13:44:22.937 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI)'
2026-01-03 13:44:22.937 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoyaltyAPI.Model.LoginRequest) on controller LoyaltyAPI.Controllers.UserController (LoyaltyAPI).
2026-01-03 13:44:23.383 +07:00 [INF] User admin_loan logged in successfully.
2026-01-03 13:44:23.384 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType18`4[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int64, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-03 13:44:23.384 +07:00 [INF] Executed action LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI) in 447.1073ms
2026-01-03 13:44:23.384 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI)'
2026-01-03 13:44:23.385 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44343/api/User/login - 200 null application/json; charset=utf-8 448.1139ms
2026-01-03 13:44:23.408 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=1 - null null
2026-01-03 13:44:23.409 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 13:44:23.414 +07:00 [INF] Route matched with {action = "GetAllRewardsForAdmin", controller = "Loyalty"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRewardsForAdmin(Int32, Int32) on controller LoyaltyAPI.Controllers.LoyaltyController (LoyaltyAPI).
2026-01-03 13:44:23.433 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[LoyaltyAPI.Model.RewardResponse, LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-03 13:44:23.434 +07:00 [INF] Executed action LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI) in 19.5047ms
2026-01-03 13:44:23.434 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 13:44:23.434 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=1 - 200 null application/json; charset=utf-8 26.0609ms
2026-01-03 13:44:23.599 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=10 - null null
2026-01-03 13:44:23.600 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 13:44:23.600 +07:00 [INF] Route matched with {action = "GetAllRewardsForAdmin", controller = "Loyalty"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRewardsForAdmin(Int32, Int32) on controller LoyaltyAPI.Controllers.LoyaltyController (LoyaltyAPI).
2026-01-03 13:44:23.613 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[LoyaltyAPI.Model.RewardResponse, LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-03 13:44:23.614 +07:00 [INF] Executed action LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI) in 13.7643ms
2026-01-03 13:44:23.614 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 13:44:23.615 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=10 - 200 null application/json; charset=utf-8 15.6492ms
2026-01-03 18:59:14.609 +07:00 [INF] Starting LoyaltyAPI application
2026-01-03 18:59:14.915 +07:00 [INF] LoyaltyAPI is starting up
2026-01-03 18:59:15.015 +07:00 [WRN] The WebRootPath was not found: D:\Code\LoyaltyAPI\LoyaltyAPI\wwwroot. Static files may be unavailable.
2026-01-03 18:59:15.159 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44343/ - null null
2026-01-03 18:59:15.204 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-03 18:59:15.205 +07:00 [INF] Hosting environment: Development
2026-01-03 18:59:15.205 +07:00 [INF] Content root path: D:\Code\LoyaltyAPI\LoyaltyAPI
2026-01-03 18:59:15.817 +07:00 [INF] Executing endpoint 'HTTP: GET /'
2026-01-03 18:59:15.848 +07:00 [INF] Executed endpoint 'HTTP: GET /'
2026-01-03 18:59:15.853 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44343/ - 200 null text/plain; charset=utf-8 695.5092ms
2026-01-03 18:59:16.142 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44343/favicon.ico - null null
2026-01-03 18:59:16.150 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44343/favicon.ico - 401 null null 7.7085ms
2026-01-03 18:59:30.146 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44343/api/User/login - application/json; charset=utf-8 null
2026-01-03 18:59:30.151 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI)'
2026-01-03 18:59:30.174 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoyaltyAPI.Model.LoginRequest) on controller LoyaltyAPI.Controllers.UserController (LoyaltyAPI).
2026-01-03 18:59:34.401 +07:00 [INF] Executed action LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI) in 4224.2635ms
2026-01-03 18:59:34.401 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI)'
2026-01-03 18:59:34.404 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Npgsql.NpgsqlException (0x80004005): Failed to connect to 127.0.0.1:26257
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|209_0(NpgsqlConnector conn, String username, SslMode sslMode, GssEncryptionMode gssEncMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Dapper.SqlMapper.QueryRowAsync[T](IDbConnection cnn, Row row, Type effectiveType, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 488
   at LoyaltyAPI.Controllers.UserController.Login(LoginRequest request) in D:\Code\LoyaltyAPI\LoyaltyAPI\Controllers\UserController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at LoyaltyAPI.Security.ApiKeyMiddleware.InvokeAsync(HttpContext context) in D:\Code\LoyaltyAPI\LoyaltyAPI\Security\ApiKeyMiddleware.cs:line 42
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-03 18:59:34.429 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44343/api/User/login - 500 null text/plain; charset=utf-8 4283.1968ms
2026-01-03 18:59:48.192 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44343/api/User/login - application/json; charset=utf-8 null
2026-01-03 18:59:48.196 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI)'
2026-01-03 18:59:48.197 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoyaltyAPI.Model.LoginRequest) on controller LoyaltyAPI.Controllers.UserController (LoyaltyAPI).
2026-01-03 18:59:49.215 +07:00 [INF] User admin_loan logged in successfully.
2026-01-03 18:59:49.220 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType18`4[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int64, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-03 18:59:49.234 +07:00 [INF] Executed action LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI) in 1036.9108ms
2026-01-03 18:59:49.234 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI)'
2026-01-03 18:59:49.235 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44343/api/User/login - 200 null application/json; charset=utf-8 1042.4139ms
2026-01-03 18:59:49.284 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=1 - null null
2026-01-03 18:59:49.284 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 18:59:49.288 +07:00 [INF] Route matched with {action = "GetAllRewardsForAdmin", controller = "Loyalty"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRewardsForAdmin(Int32, Int32) on controller LoyaltyAPI.Controllers.LoyaltyController (LoyaltyAPI).
2026-01-03 18:59:49.349 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[LoyaltyAPI.Model.RewardResponse, LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-03 18:59:49.362 +07:00 [INF] Executed action LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI) in 74.1836ms
2026-01-03 18:59:49.362 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 18:59:49.363 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=1 - 200 null application/json; charset=utf-8 78.9799ms
2026-01-03 18:59:49.625 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=10 - null null
2026-01-03 18:59:49.627 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 18:59:49.627 +07:00 [INF] Route matched with {action = "GetAllRewardsForAdmin", controller = "Loyalty"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRewardsForAdmin(Int32, Int32) on controller LoyaltyAPI.Controllers.LoyaltyController (LoyaltyAPI).
2026-01-03 18:59:49.641 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[LoyaltyAPI.Model.RewardResponse, LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-03 18:59:49.642 +07:00 [INF] Executed action LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI) in 14.0685ms
2026-01-03 18:59:49.642 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 18:59:49.642 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=10 - 200 null application/json; charset=utf-8 17.3025ms
2026-01-03 18:59:49.765 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44343/Uploads/rewards/reward_1137447124179353601_20251231143514.png - null null
2026-01-03 18:59:49.768 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44343/Uploads/rewards/reward_1136864802507718657_20251231141836.png - null null
2026-01-03 18:59:49.769 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44343/Uploads/rewards/reward_1137433323122720769_20251231132503.jpg - null null
2026-01-03 18:59:49.770 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44343/Uploads/rewards/reward_1137158563853271041_20251230140733.png - null null
2026-01-03 18:59:49.770 +07:00 [INF] The file /rewards/reward_1136864802507718657_20251231141836.png was not modified
2026-01-03 18:59:49.770 +07:00 [INF] The file /rewards/reward_1137447124179353601_20251231143514.png was not modified
2026-01-03 18:59:49.770 +07:00 [INF] The file /rewards/reward_1137158563853271041_20251230140733.png was not modified
2026-01-03 18:59:49.770 +07:00 [INF] The file /rewards/reward_1137433323122720769_20251231132503.jpg was not modified
2026-01-03 18:59:49.772 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44343/Uploads/rewards/reward_1137447124179353601_20251231143514.png - 304 null image/png 6.2801ms
2026-01-03 18:59:49.772 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44343/Uploads/rewards/reward_1137158563853271041_20251230140733.png - 304 null image/png 1.8838ms
2026-01-03 18:59:49.772 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44343/Uploads/rewards/reward_1137433323122720769_20251231132503.jpg - 304 null image/jpeg 2.5505ms
2026-01-03 18:59:49.772 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44343/Uploads/rewards/reward_1136864802507718657_20251231141836.png - 304 null image/png 4.078ms
2026-01-03 18:59:53.483 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=2&pageSize=10 - null null
2026-01-03 18:59:53.484 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 18:59:53.484 +07:00 [INF] Route matched with {action = "GetAllRewardsForAdmin", controller = "Loyalty"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRewardsForAdmin(Int32, Int32) on controller LoyaltyAPI.Controllers.LoyaltyController (LoyaltyAPI).
2026-01-03 18:59:53.489 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[LoyaltyAPI.Model.RewardResponse, LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-03 18:59:53.489 +07:00 [INF] Executed action LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI) in 5.4199ms
2026-01-03 18:59:53.489 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 18:59:53.489 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=2&pageSize=10 - 200 null application/json; charset=utf-8 6.0237ms
2026-01-03 18:59:54.988 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=10 - null null
2026-01-03 18:59:54.988 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 18:59:54.988 +07:00 [INF] Route matched with {action = "GetAllRewardsForAdmin", controller = "Loyalty"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRewardsForAdmin(Int32, Int32) on controller LoyaltyAPI.Controllers.LoyaltyController (LoyaltyAPI).
2026-01-03 18:59:54.997 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[LoyaltyAPI.Model.RewardResponse, LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-03 18:59:54.998 +07:00 [INF] Executed action LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI) in 9.8973ms
2026-01-03 18:59:54.998 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 18:59:54.998 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=10 - 200 null application/json; charset=utf-8 10.6358ms
2026-01-03 19:06:03.824 +07:00 [INF] Starting LoyaltyAPI application
2026-01-03 19:06:04.006 +07:00 [INF] LoyaltyAPI is starting up
2026-01-03 19:06:04.050 +07:00 [WRN] The WebRootPath was not found: D:\Code\LoyaltyAPI\LoyaltyAPI\wwwroot. Static files may be unavailable.
2026-01-03 19:06:04.077 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44343/api/User/login - application/json; charset=utf-8 null
2026-01-03 19:06:04.122 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI)'
2026-01-03 19:06:04.135 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoyaltyAPI.Model.LoginRequest) on controller LoyaltyAPI.Controllers.UserController (LoyaltyAPI).
2026-01-03 19:06:04.180 +07:00 [INF] Executed action LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI) in 41.5687ms
2026-01-03 19:06:04.189 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI)'
2026-01-03 19:06:04.190 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Couldn't set port (Parameter 'port')
 ---> System.FormatException: The input string '26257,26258,26259' was not in a correct format.
   at System.Number.ThrowFormatException[TChar](ReadOnlySpan`1 value)
   at System.String.System.IConvertible.ToInt32(IFormatProvider provider)
   at System.Convert.ChangeType(Object value, Type conversionType, IFormatProvider provider)
   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedActions(GeneratedAction action, String keyword, Object& value)
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   --- End of inner exception stack trace ---
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)
   at Npgsql.NpgsqlConnection.SetupDataSource()
   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnection..ctor(String connectionString)
   at LoyaltyAPI.Controllers.UserController.Login(LoginRequest request) in D:\Code\LoyaltyAPI\LoyaltyAPI\Controllers\UserController.cs:line 34
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at LoyaltyAPI.Security.ApiKeyMiddleware.InvokeAsync(HttpContext context) in D:\Code\LoyaltyAPI\LoyaltyAPI\Security\ApiKeyMiddleware.cs:line 42
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-03 19:06:04.194 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-03 19:06:04.211 +07:00 [INF] Hosting environment: Development
2026-01-03 19:06:04.211 +07:00 [INF] Content root path: D:\Code\LoyaltyAPI\LoyaltyAPI
2026-01-03 19:06:04.230 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44343/api/User/login - 500 null text/plain; charset=utf-8 154.8893ms
2026-01-03 19:07:01.694 +07:00 [INF] Starting LoyaltyAPI application
2026-01-03 19:07:01.909 +07:00 [INF] LoyaltyAPI is starting up
2026-01-03 19:07:01.964 +07:00 [WRN] The WebRootPath was not found: D:\Code\LoyaltyAPI\LoyaltyAPI\wwwroot. Static files may be unavailable.
2026-01-03 19:07:02.007 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44343/ - null null
2026-01-03 19:07:02.133 +07:00 [INF] Executing endpoint 'HTTP: GET /'
2026-01-03 19:07:02.160 +07:00 [INF] Executed endpoint 'HTTP: GET /'
2026-01-03 19:07:02.163 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44343/ - 200 null text/plain; charset=utf-8 157.9542ms
2026-01-03 19:07:02.204 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-03 19:07:02.204 +07:00 [INF] Hosting environment: Development
2026-01-03 19:07:02.204 +07:00 [INF] Content root path: D:\Code\LoyaltyAPI\LoyaltyAPI
2026-01-03 19:07:02.296 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44343/favicon.ico - null null
2026-01-03 19:07:02.302 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44343/favicon.ico - 401 null null 5.3121ms
2026-01-03 19:07:09.586 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44343/api/User/login - application/json; charset=utf-8 null
2026-01-03 19:07:09.592 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI)'
2026-01-03 19:07:09.614 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoyaltyAPI.Model.LoginRequest) on controller LoyaltyAPI.Controllers.UserController (LoyaltyAPI).
2026-01-03 19:07:10.551 +07:00 [INF] User admin_loan logged in successfully.
2026-01-03 19:07:10.556 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType18`4[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int64, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-03 19:07:10.571 +07:00 [INF] Executed action LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI) in 954.5024ms
2026-01-03 19:07:10.572 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI)'
2026-01-03 19:07:10.573 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44343/api/User/login - 200 null application/json; charset=utf-8 986.6923ms
2026-01-03 19:07:10.593 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=1 - null null
2026-01-03 19:07:10.594 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 19:07:10.598 +07:00 [INF] Route matched with {action = "GetAllRewardsForAdmin", controller = "Loyalty"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRewardsForAdmin(Int32, Int32) on controller LoyaltyAPI.Controllers.LoyaltyController (LoyaltyAPI).
2026-01-03 19:07:10.634 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[LoyaltyAPI.Model.RewardResponse, LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-03 19:07:10.644 +07:00 [INF] Executed action LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI) in 45.7857ms
2026-01-03 19:07:10.644 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 19:07:10.644 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=1 - 200 null application/json; charset=utf-8 51.1175ms
2026-01-03 19:07:11.032 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=10 - null null
2026-01-03 19:07:11.039 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 19:07:11.040 +07:00 [INF] Route matched with {action = "GetAllRewardsForAdmin", controller = "Loyalty"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRewardsForAdmin(Int32, Int32) on controller LoyaltyAPI.Controllers.LoyaltyController (LoyaltyAPI).
2026-01-03 19:07:11.048 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[LoyaltyAPI.Model.RewardResponse, LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-03 19:07:11.048 +07:00 [INF] Executed action LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI) in 8.5273ms
2026-01-03 19:07:11.048 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 19:07:11.049 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=10 - 200 null application/json; charset=utf-8 16.1307ms
2026-01-03 19:07:25.162 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44343/ - null null
2026-01-03 19:07:25.165 +07:00 [INF] Executing endpoint 'HTTP: GET /'
2026-01-03 19:07:25.165 +07:00 [INF] Executed endpoint 'HTTP: GET /'
2026-01-03 19:07:25.165 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44343/ - 200 null text/plain; charset=utf-8 3.7291ms
2026-01-03 19:07:32.669 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44343/api/User/login - application/json; charset=utf-8 null
2026-01-03 19:07:32.670 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI)'
2026-01-03 19:07:32.670 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoyaltyAPI.Model.LoginRequest) on controller LoyaltyAPI.Controllers.UserController (LoyaltyAPI).
2026-01-03 19:07:33.142 +07:00 [INF] User admin_loan logged in successfully.
2026-01-03 19:07:33.142 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType18`4[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int64, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-03 19:07:33.143 +07:00 [INF] Executed action LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI) in 472.5491ms
2026-01-03 19:07:33.143 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI)'
2026-01-03 19:07:33.143 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44343/api/User/login - 200 null application/json; charset=utf-8 474.0376ms
2026-01-03 19:07:33.169 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=1 - null null
2026-01-03 19:07:33.169 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 19:07:33.169 +07:00 [INF] Route matched with {action = "GetAllRewardsForAdmin", controller = "Loyalty"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRewardsForAdmin(Int32, Int32) on controller LoyaltyAPI.Controllers.LoyaltyController (LoyaltyAPI).
2026-01-03 19:07:33.177 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[LoyaltyAPI.Model.RewardResponse, LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-03 19:07:33.177 +07:00 [INF] Executed action LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI) in 8.2169ms
2026-01-03 19:07:33.177 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 19:07:33.177 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=1 - 200 null application/json; charset=utf-8 8.9254ms
2026-01-03 19:07:33.299 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=10 - null null
2026-01-03 19:07:33.300 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 19:07:33.300 +07:00 [INF] Route matched with {action = "GetAllRewardsForAdmin", controller = "Loyalty"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRewardsForAdmin(Int32, Int32) on controller LoyaltyAPI.Controllers.LoyaltyController (LoyaltyAPI).
2026-01-03 19:07:33.306 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[LoyaltyAPI.Model.RewardResponse, LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-03 19:07:33.307 +07:00 [INF] Executed action LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI) in 6.9479ms
2026-01-03 19:07:33.307 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 19:07:33.307 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=10 - 200 null application/json; charset=utf-8 7.8468ms
2026-01-03 19:08:52.991 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44343/api/User/login - application/json; charset=utf-8 null
2026-01-03 19:08:52.992 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI)'
2026-01-03 19:08:52.992 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoyaltyAPI.Model.LoginRequest) on controller LoyaltyAPI.Controllers.UserController (LoyaltyAPI).
2026-01-03 19:09:03.543 +07:00 [INF] User admin_loan logged in successfully.
2026-01-03 19:09:03.543 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType18`4[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int64, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-03 19:09:03.543 +07:00 [INF] Executed action LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI) in 10551.3727ms
2026-01-03 19:09:03.543 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI)'
2026-01-03 19:09:03.544 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44343/api/User/login - 200 null application/json; charset=utf-8 10552.4928ms
2026-01-03 19:09:03.574 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=1 - null null
2026-01-03 19:09:03.574 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 19:09:03.574 +07:00 [INF] Route matched with {action = "GetAllRewardsForAdmin", controller = "Loyalty"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRewardsForAdmin(Int32, Int32) on controller LoyaltyAPI.Controllers.LoyaltyController (LoyaltyAPI).
2026-01-03 19:09:03.594 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[LoyaltyAPI.Model.RewardResponse, LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-03 19:09:03.594 +07:00 [INF] Executed action LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI) in 20.0457ms
2026-01-03 19:09:03.595 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 19:09:03.595 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=1 - 200 null application/json; charset=utf-8 20.6357ms
2026-01-03 19:09:03.757 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=10 - null null
2026-01-03 19:09:03.758 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 19:09:03.758 +07:00 [INF] Route matched with {action = "GetAllRewardsForAdmin", controller = "Loyalty"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRewardsForAdmin(Int32, Int32) on controller LoyaltyAPI.Controllers.LoyaltyController (LoyaltyAPI).
2026-01-03 19:09:03.766 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[LoyaltyAPI.Model.RewardResponse, LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-03 19:09:03.769 +07:00 [INF] Executed action LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI) in 10.5225ms
2026-01-03 19:09:03.771 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 19:09:03.772 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=10 - 200 null application/json; charset=utf-8 14.5716ms
2026-01-03 19:12:23.135 +07:00 [INF] Starting LoyaltyAPI application
2026-01-03 19:12:23.392 +07:00 [INF] Database connection string configured with nodes: Host=localhost:26257,localhost:26258,localhost:26259;Database=loyalty_db;Username=dev_user;SSL Mode=Disable;
2026-01-03 19:12:23.393 +07:00 [INF] LoyaltyAPI is starting up
2026-01-03 19:12:23.441 +07:00 [WRN] The WebRootPath was not found: D:\Code\LoyaltyAPI\LoyaltyAPI\wwwroot. Static files may be unavailable.
2026-01-03 19:12:23.471 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44343/ - null null
2026-01-03 19:12:23.471 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=1 - null null
2026-01-03 19:12:23.507 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-03 19:12:23.507 +07:00 [INF] Hosting environment: Development
2026-01-03 19:12:23.508 +07:00 [INF] Content root path: D:\Code\LoyaltyAPI\LoyaltyAPI
2026-01-03 19:12:23.533 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 19:12:23.540 +07:00 [INF] Executing endpoint 'HTTP: GET /'
2026-01-03 19:12:23.547 +07:00 [INF] Route matched with {action = "GetAllRewardsForAdmin", controller = "Loyalty"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRewardsForAdmin(Int32, Int32) on controller LoyaltyAPI.Controllers.LoyaltyController (LoyaltyAPI).
2026-01-03 19:12:23.560 +07:00 [INF] Executed endpoint 'HTTP: GET /'
2026-01-03 19:12:23.563 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44343/ - 200 null text/plain; charset=utf-8 94.363ms
2026-01-03 19:12:24.240 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[LoyaltyAPI.Model.RewardResponse, LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-03 19:12:24.254 +07:00 [INF] Executed action LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI) in 704.2884ms
2026-01-03 19:12:24.254 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 19:12:24.256 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=1 - 200 null application/json; charset=utf-8 787.3552ms
2026-01-03 19:12:24.614 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=10 - null null
2026-01-03 19:12:24.633 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 19:12:24.633 +07:00 [INF] Route matched with {action = "GetAllRewardsForAdmin", controller = "Loyalty"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRewardsForAdmin(Int32, Int32) on controller LoyaltyAPI.Controllers.LoyaltyController (LoyaltyAPI).
2026-01-03 19:12:24.645 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[LoyaltyAPI.Model.RewardResponse, LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-03 19:12:24.647 +07:00 [INF] Executed action LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI) in 13.1208ms
2026-01-03 19:12:24.647 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 19:12:24.647 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=10 - 200 null application/json; charset=utf-8 32.9421ms
2026-01-03 19:12:35.901 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44343/api/User/login - application/json; charset=utf-8 null
2026-01-03 19:12:35.902 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI)'
2026-01-03 19:12:35.914 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoyaltyAPI.Model.LoginRequest) on controller LoyaltyAPI.Controllers.UserController (LoyaltyAPI).
2026-01-03 19:12:36.011 +07:00 [ERR]  Li khi kt ni database
System.InvalidCastException: Reading as 'System.String' is not supported for fields having DataTypeName 'inet'
   at Npgsql.Internal.AdoSerializerHelpers.<GetTypeInfoForReading>g__ThrowReadingNotSupported|0_0(Type type, PgSerializerOptions options, PgTypeId pgTypeId, Exception inner)
   at Npgsql.Internal.AdoSerializerHelpers.GetTypeInfoForReading(Type type, PgTypeId pgTypeId, PgSerializerOptions options)
   at Npgsql.BackendMessages.FieldDescription.<GetInfoCore>g__GetInfoSlow|51_0(Type type, ColumnInfo& lastColumnInfo)
   at Npgsql.BackendMessages.FieldDescription.GetInfoCore(Type type, ColumnInfo& lastColumnInfo)
   at Npgsql.BackendMessages.FieldDescription.GetInfo(Type type, ColumnInfo& lastColumnInfo)
   at Npgsql.NpgsqlDataReader.<GetInfo>g__Slow|132_0(ColumnInfo& info, PgConverter& converter, Size& bufferRequirement, Boolean& asObject, <>c__DisplayClass132_0&)
   at Npgsql.NpgsqlDataReader.GetFieldValueCore[T](Int32 ordinal)
   at Npgsql.NpgsqlDataReader.GetString(Int32 ordinal)
   at LoyaltyAPI.Helpers.ConnectionHelper.OpenWithLoggingAsync(IDbConnection connection, ILogger logger) in D:\Code\LoyaltyAPI\LoyaltyAPI\Helpers\ConnectionHelper.cs:line 28
2026-01-03 19:12:36.023 +07:00 [INF] Executed action LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI) in 108.8859ms
2026-01-03 19:12:36.023 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI)'
2026-01-03 19:12:36.025 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Reading as 'System.String' is not supported for fields having DataTypeName 'inet'
   at Npgsql.Internal.AdoSerializerHelpers.<GetTypeInfoForReading>g__ThrowReadingNotSupported|0_0(Type type, PgSerializerOptions options, PgTypeId pgTypeId, Exception inner)
   at Npgsql.Internal.AdoSerializerHelpers.GetTypeInfoForReading(Type type, PgTypeId pgTypeId, PgSerializerOptions options)
   at Npgsql.BackendMessages.FieldDescription.<GetInfoCore>g__GetInfoSlow|51_0(Type type, ColumnInfo& lastColumnInfo)
   at Npgsql.BackendMessages.FieldDescription.GetInfoCore(Type type, ColumnInfo& lastColumnInfo)
   at Npgsql.BackendMessages.FieldDescription.GetInfo(Type type, ColumnInfo& lastColumnInfo)
   at Npgsql.NpgsqlDataReader.<GetInfo>g__Slow|132_0(ColumnInfo& info, PgConverter& converter, Size& bufferRequirement, Boolean& asObject, <>c__DisplayClass132_0&)
   at Npgsql.NpgsqlDataReader.GetFieldValueCore[T](Int32 ordinal)
   at Npgsql.NpgsqlDataReader.GetString(Int32 ordinal)
   at LoyaltyAPI.Helpers.ConnectionHelper.OpenWithLoggingAsync(IDbConnection connection, ILogger logger) in D:\Code\LoyaltyAPI\LoyaltyAPI\Helpers\ConnectionHelper.cs:line 28
   at LoyaltyAPI.Controllers.UserController.Login(LoginRequest request) in D:\Code\LoyaltyAPI\LoyaltyAPI\Controllers\UserController.cs:line 36
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at LoyaltyAPI.Security.ApiKeyMiddleware.InvokeAsync(HttpContext context) in D:\Code\LoyaltyAPI\LoyaltyAPI\Security\ApiKeyMiddleware.cs:line 42
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-03 19:12:36.030 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44343/api/User/login - 500 null text/plain; charset=utf-8 128.9663ms
2026-01-03 19:13:00.498 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44343/api/User/login - application/json; charset=utf-8 null
2026-01-03 19:13:00.499 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI)'
2026-01-03 19:13:00.499 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoyaltyAPI.Model.LoginRequest) on controller LoyaltyAPI.Controllers.UserController (LoyaltyAPI).
2026-01-03 19:13:00.506 +07:00 [ERR]  Li khi kt ni database
System.InvalidCastException: Reading as 'System.String' is not supported for fields having DataTypeName 'inet'
   at Npgsql.Internal.AdoSerializerHelpers.<GetTypeInfoForReading>g__ThrowReadingNotSupported|0_0(Type type, PgSerializerOptions options, PgTypeId pgTypeId, Exception inner)
   at Npgsql.Internal.AdoSerializerHelpers.GetTypeInfoForReading(Type type, PgTypeId pgTypeId, PgSerializerOptions options)
   at Npgsql.BackendMessages.FieldDescription.<GetInfoCore>g__GetInfoSlow|51_0(Type type, ColumnInfo& lastColumnInfo)
   at Npgsql.BackendMessages.FieldDescription.GetInfoCore(Type type, ColumnInfo& lastColumnInfo)
   at Npgsql.BackendMessages.FieldDescription.GetInfo(Type type, ColumnInfo& lastColumnInfo)
   at Npgsql.NpgsqlDataReader.<GetInfo>g__Slow|132_0(ColumnInfo& info, PgConverter& converter, Size& bufferRequirement, Boolean& asObject, <>c__DisplayClass132_0&)
   at Npgsql.NpgsqlDataReader.GetFieldValueCore[T](Int32 ordinal)
   at Npgsql.NpgsqlDataReader.GetString(Int32 ordinal)
   at LoyaltyAPI.Helpers.ConnectionHelper.OpenWithLoggingAsync(IDbConnection connection, ILogger logger) in D:\Code\LoyaltyAPI\LoyaltyAPI\Helpers\ConnectionHelper.cs:line 28
2026-01-03 19:13:00.507 +07:00 [INF] Executed action LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI) in 7.8294ms
2026-01-03 19:13:00.507 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI)'
2026-01-03 19:13:00.507 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Reading as 'System.String' is not supported for fields having DataTypeName 'inet'
   at Npgsql.Internal.AdoSerializerHelpers.<GetTypeInfoForReading>g__ThrowReadingNotSupported|0_0(Type type, PgSerializerOptions options, PgTypeId pgTypeId, Exception inner)
   at Npgsql.Internal.AdoSerializerHelpers.GetTypeInfoForReading(Type type, PgTypeId pgTypeId, PgSerializerOptions options)
   at Npgsql.BackendMessages.FieldDescription.<GetInfoCore>g__GetInfoSlow|51_0(Type type, ColumnInfo& lastColumnInfo)
   at Npgsql.BackendMessages.FieldDescription.GetInfoCore(Type type, ColumnInfo& lastColumnInfo)
   at Npgsql.BackendMessages.FieldDescription.GetInfo(Type type, ColumnInfo& lastColumnInfo)
   at Npgsql.NpgsqlDataReader.<GetInfo>g__Slow|132_0(ColumnInfo& info, PgConverter& converter, Size& bufferRequirement, Boolean& asObject, <>c__DisplayClass132_0&)
   at Npgsql.NpgsqlDataReader.GetFieldValueCore[T](Int32 ordinal)
   at Npgsql.NpgsqlDataReader.GetString(Int32 ordinal)
   at LoyaltyAPI.Helpers.ConnectionHelper.OpenWithLoggingAsync(IDbConnection connection, ILogger logger) in D:\Code\LoyaltyAPI\LoyaltyAPI\Helpers\ConnectionHelper.cs:line 28
   at LoyaltyAPI.Controllers.UserController.Login(LoginRequest request) in D:\Code\LoyaltyAPI\LoyaltyAPI\Controllers\UserController.cs:line 36
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at LoyaltyAPI.Security.ApiKeyMiddleware.InvokeAsync(HttpContext context) in D:\Code\LoyaltyAPI\LoyaltyAPI\Security\ApiKeyMiddleware.cs:line 42
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2026-01-03 19:13:00.510 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44343/api/User/login - 500 null text/plain; charset=utf-8 11.9862ms
2026-01-03 19:16:54.117 +07:00 [INF] Starting LoyaltyAPI application
2026-01-03 19:16:54.319 +07:00 [INF] LoyaltyAPI is starting up
2026-01-03 19:16:54.371 +07:00 [WRN] The WebRootPath was not found: D:\Code\LoyaltyAPI\LoyaltyAPI\wwwroot. Static files may be unavailable.
2026-01-03 19:16:54.401 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44343/ - null null
2026-01-03 19:16:54.485 +07:00 [INF] Executing endpoint 'HTTP: GET /'
2026-01-03 19:16:54.503 +07:00 [INF] Executed endpoint 'HTTP: GET /'
2026-01-03 19:16:54.505 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44343/ - 200 null text/plain; charset=utf-8 105.6259ms
2026-01-03 19:16:54.530 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-03 19:16:54.531 +07:00 [INF] Hosting environment: Development
2026-01-03 19:16:54.531 +07:00 [INF] Content root path: D:\Code\LoyaltyAPI\LoyaltyAPI
2026-01-03 19:17:02.461 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44343/api/User/login - application/json; charset=utf-8 null
2026-01-03 19:17:02.466 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI)'
2026-01-03 19:17:02.482 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoyaltyAPI.Model.LoginRequest) on controller LoyaltyAPI.Controllers.UserController (LoyaltyAPI).
2026-01-03 19:17:02.788 +07:00 [INF]  Database connected successfully - Host: localhost, Port: 26257, Database: loyalty_db
2026-01-03 19:17:03.476 +07:00 [INF] User admin_loan logged in successfully.
2026-01-03 19:17:03.483 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType18`4[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int64, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-03 19:17:03.499 +07:00 [INF] Executed action LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI) in 1013.9623ms
2026-01-03 19:17:03.499 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI)'
2026-01-03 19:17:03.501 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44343/api/User/login - 200 null application/json; charset=utf-8 1039.714ms
2026-01-03 19:17:03.530 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=1 - null null
2026-01-03 19:17:03.532 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 19:17:03.539 +07:00 [INF] Route matched with {action = "GetAllRewardsForAdmin", controller = "Loyalty"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRewardsForAdmin(Int32, Int32) on controller LoyaltyAPI.Controllers.LoyaltyController (LoyaltyAPI).
2026-01-03 19:17:03.546 +07:00 [INF]  Database connected successfully - Host: localhost, Port: 26257, Database: loyalty_db
2026-01-03 19:17:03.580 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[LoyaltyAPI.Model.RewardResponse, LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-03 19:17:03.592 +07:00 [INF] Executed action LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI) in 53.0878ms
2026-01-03 19:17:03.592 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 19:17:03.592 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=1 - 200 null application/json; charset=utf-8 62.548ms
2026-01-03 19:17:03.738 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=10 - null null
2026-01-03 19:17:03.739 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 19:17:03.739 +07:00 [INF] Route matched with {action = "GetAllRewardsForAdmin", controller = "Loyalty"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRewardsForAdmin(Int32, Int32) on controller LoyaltyAPI.Controllers.LoyaltyController (LoyaltyAPI).
2026-01-03 19:17:03.740 +07:00 [INF]  Database connected successfully - Host: localhost, Port: 26257, Database: loyalty_db
2026-01-03 19:17:03.761 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[LoyaltyAPI.Model.RewardResponse, LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-03 19:17:03.763 +07:00 [INF] Executed action LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI) in 23.5324ms
2026-01-03 19:17:03.763 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 19:17:03.764 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=10 - 200 null application/json; charset=utf-8 25.9806ms
2026-01-03 19:17:03.834 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44343/Uploads/rewards/reward_1137447124179353601_20251231143514.png - null null
2026-01-03 19:17:03.835 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44343/Uploads/rewards/reward_1136864802507718657_20251231141836.png - null null
2026-01-03 19:17:03.846 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44343/Uploads/rewards/reward_1137433323122720769_20251231132503.jpg - null null
2026-01-03 19:17:03.849 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44343/Uploads/rewards/reward_1137158563853271041_20251230140733.png - null null
2026-01-03 19:17:03.878 +07:00 [INF] Sending file. Request path: '/rewards/reward_1136864802507718657_20251231141836.png'. Physical path: 'D:\Code\LoyaltyAPI\LoyaltyAPI\Uploads\rewards\reward_1136864802507718657_20251231141836.png'
2026-01-03 19:17:03.878 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44343/Uploads/rewards/reward_1136864802507718657_20251231141836.png - 200 99211 image/png 43.2609ms
2026-01-03 19:17:03.888 +07:00 [INF] Sending file. Request path: '/rewards/reward_1137447124179353601_20251231143514.png'. Physical path: 'D:\Code\LoyaltyAPI\LoyaltyAPI\Uploads\rewards\reward_1137447124179353601_20251231143514.png'
2026-01-03 19:17:03.888 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44343/Uploads/rewards/reward_1137447124179353601_20251231143514.png - 499 7631 image/png 54.2994ms
2026-01-03 19:17:03.889 +07:00 [INF] Sending file. Request path: '/rewards/reward_1137433323122720769_20251231132503.jpg'. Physical path: 'D:\Code\LoyaltyAPI\LoyaltyAPI\Uploads\rewards\reward_1137433323122720769_20251231132503.jpg'
2026-01-03 19:17:03.890 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44343/Uploads/rewards/reward_1137433323122720769_20251231132503.jpg - 499 7722 image/jpeg 43.6572ms
2026-01-03 19:17:03.895 +07:00 [INF] Sending file. Request path: '/rewards/reward_1137158563853271041_20251230140733.png'. Physical path: 'D:\Code\LoyaltyAPI\LoyaltyAPI\Uploads\rewards\reward_1137158563853271041_20251230140733.png'
2026-01-03 19:17:03.895 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44343/Uploads/rewards/reward_1137158563853271041_20251230140733.png - 499 7631 image/png 46.7547ms
2026-01-03 19:18:11.821 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44343/api/User/login - application/json; charset=utf-8 null
2026-01-03 19:18:11.823 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI)'
2026-01-03 19:18:11.823 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoyaltyAPI.Model.LoginRequest) on controller LoyaltyAPI.Controllers.UserController (LoyaltyAPI).
2026-01-03 19:18:11.990 +07:00 [INF]  Database connected successfully - Host: localhost, Port: 26258, Database: loyalty_db
2026-01-03 19:18:12.277 +07:00 [INF] User admin_loan logged in successfully.
2026-01-03 19:18:12.277 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType18`4[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int64, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-03 19:18:12.278 +07:00 [INF] Executed action LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI) in 454.8685ms
2026-01-03 19:18:12.278 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI)'
2026-01-03 19:18:12.278 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44343/api/User/login - 200 null application/json; charset=utf-8 456.9737ms
2026-01-03 19:18:12.297 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=1 - null null
2026-01-03 19:18:12.297 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 19:18:12.297 +07:00 [INF] Route matched with {action = "GetAllRewardsForAdmin", controller = "Loyalty"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRewardsForAdmin(Int32, Int32) on controller LoyaltyAPI.Controllers.LoyaltyController (LoyaltyAPI).
2026-01-03 19:18:12.297 +07:00 [INF]  Database connected successfully - Host: localhost, Port: 26258, Database: loyalty_db
2026-01-03 19:18:12.306 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[LoyaltyAPI.Model.RewardResponse, LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-03 19:18:12.306 +07:00 [INF] Executed action LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI) in 8.8173ms
2026-01-03 19:18:12.306 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 19:18:12.306 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=1 - 200 null application/json; charset=utf-8 9.5019ms
2026-01-03 19:18:12.421 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=10 - null null
2026-01-03 19:18:12.431 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 19:18:12.431 +07:00 [INF] Route matched with {action = "GetAllRewardsForAdmin", controller = "Loyalty"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRewardsForAdmin(Int32, Int32) on controller LoyaltyAPI.Controllers.LoyaltyController (LoyaltyAPI).
2026-01-03 19:18:12.431 +07:00 [INF]  Database connected successfully - Host: localhost, Port: 26258, Database: loyalty_db
2026-01-03 19:18:12.437 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[LoyaltyAPI.Model.RewardResponse, LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-03 19:18:12.438 +07:00 [INF] Executed action LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI) in 6.4861ms
2026-01-03 19:18:12.438 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 19:18:12.438 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=10 - 200 null application/json; charset=utf-8 17.4725ms
2026-01-03 19:18:42.868 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44343/api/User/login - application/json; charset=utf-8 null
2026-01-03 19:18:42.869 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI)'
2026-01-03 19:18:42.869 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoyaltyAPI.Model.LoginRequest) on controller LoyaltyAPI.Controllers.UserController (LoyaltyAPI).
2026-01-03 19:18:42.962 +07:00 [INF]  Database connected successfully - Host: localhost, Port: 26257, Database: loyalty_db
2026-01-03 19:18:43.275 +07:00 [INF] User admin_loan logged in successfully.
2026-01-03 19:18:43.276 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType18`4[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int64, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-03 19:18:43.277 +07:00 [INF] Executed action LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI) in 407.7137ms
2026-01-03 19:18:43.277 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.UserController.Login (LoyaltyAPI)'
2026-01-03 19:18:43.277 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44343/api/User/login - 200 null application/json; charset=utf-8 409.0968ms
2026-01-03 19:18:43.297 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=1 - null null
2026-01-03 19:18:43.297 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 19:18:43.297 +07:00 [INF] Route matched with {action = "GetAllRewardsForAdmin", controller = "Loyalty"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRewardsForAdmin(Int32, Int32) on controller LoyaltyAPI.Controllers.LoyaltyController (LoyaltyAPI).
2026-01-03 19:18:43.297 +07:00 [INF]  Database connected successfully - Host: localhost, Port: 26257, Database: loyalty_db
2026-01-03 19:18:43.315 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[LoyaltyAPI.Model.RewardResponse, LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-03 19:18:43.315 +07:00 [INF] Executed action LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI) in 18.0933ms
2026-01-03 19:18:43.315 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 19:18:43.315 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=1 - 200 null application/json; charset=utf-8 18.6833ms
2026-01-03 19:18:43.569 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=10 - null null
2026-01-03 19:18:43.569 +07:00 [INF] Executing endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 19:18:43.569 +07:00 [INF] Route matched with {action = "GetAllRewardsForAdmin", controller = "Loyalty"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRewardsForAdmin(Int32, Int32) on controller LoyaltyAPI.Controllers.LoyaltyController (LoyaltyAPI).
2026-01-03 19:18:43.570 +07:00 [INF]  Database connected successfully - Host: localhost, Port: 26257, Database: loyalty_db
2026-01-03 19:18:43.577 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`8[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[LoyaltyAPI.Model.RewardResponse, LoyaltyAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-03 19:18:43.579 +07:00 [INF] Executed action LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI) in 9.2132ms
2026-01-03 19:18:43.579 +07:00 [INF] Executed endpoint 'LoyaltyAPI.Controllers.LoyaltyController.GetAllRewardsForAdmin (LoyaltyAPI)'
2026-01-03 19:18:43.579 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44343/api/Loyalty/admin/rewards?page=1&pageSize=10 - 200 null application/json; charset=utf-8 10.0059ms
